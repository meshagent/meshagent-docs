---
title: "Worker Overview"
---

import QueueWorker from "/snippets/examples/python/agents/queueworker/queueworker.mdx"
import PushQueue from "/snippets/examples/python/agents/queueworker/push_queue.mdx"


A ``Worker`` is a specialized **queue-based agent that processes messages** sent to a MeshAgent room queue. **Other agents or
applications can push tasks to the queue and the Worker will handle them in the background**. This is helpful for
longâ€‘running or asynchronous jobs that shouldn't block an interactive chat agent.

## Why use a Queue Worker?
There might be cases where you need an agent to:
- Run long or repetitive jobs off the main chat thread
- Execute non-interactive tasks where no follow up questions are desired
- Batch operations that process multiple items sequentially
- Run scheduled tasks at a particular time

## Queue Worker Properties

- **queue**: The name of the Room Queue to listen for messages on
- **llm_adapter**: The adapter to use so the agent works with an LLM. We recommend using the ``OpenAIResponsesAdapter`` from ``meshagent-openai``.
- **tool_adapter**: A custom tool adapter to use to transform tool responses into context messages. We recommend using the ``OpenAIResponsesToolResponseAdapter`` from ``meshagent-openai`` (optional).
- **requires**: List of requirements for the agent. You can use RequiredSchema, RequiredToolkit to use existing toolkits and schemas that have been registered with the room with this agent (default is None).
- **toolkits**: List of local toolkits living only in this worker (e.g. `StorageToolkit`) (optional).
- **rules**: A set of rules (system or developer prompts) that guide the agent's behavior (optional).

## Example: Creating a Storage Queue Worker

The sample below shows a Worker that listens on a queue and writes files using the `StorageToolkit`. After starting the
service you can push a message to the queue to trigger the worker.

First create a python file, ``main.py``, and define our ``StorageWorker``: 

<CodeGroup>
    <QueueWorker />
</CodeGroup>

**Running the Worker**

From your terminal inside an activated virtual environment run: 
```bash bash
export WORKER_QUEUE=test 
python main.py
```

In a seprate tab run: 
```bash bash
meshagent setup
meshagent call agent --room=queue-test --url=http://localhost:8081/worker --participant-name=worker
```

### Sending Work to the Queue 

Now that our agent is running, let's send it some work! Create a python file ``push_queue.py`` and define our function to push a message to the queue.

<CodeGroup>
    <PushQueue />
</CodeGroup>

Generate a short-lived participant token and push a message to the queue:

```bash bash
meshagent participant-token generate --name=pusher \
  --room=queue-test --token-path=token.txt
WORKER_QUEUE=test ROOM=queue-test TOKEN=$(cat token.txt) python3 push_queue.py
```

### Checking Results in the Studio 

From [studio.meshagent.com](https://studio.meshagent.com) open the room ``queue-test`` and you'll see our poem about AI in the poems.txt file!
