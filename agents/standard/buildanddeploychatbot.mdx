---
title: "Build a Chat Agent"
---

import SimpleChatbot from "/snippets/examples/python/agents/chatbot/simple_chatbot.mdx"
import MeshToolsChatbot from "/snippets/examples/python/agents/chatbot/mesh_tools_chatbot.mdx"
import CustomToolsChatbot from "/snippets/examples/python/agents/chatbot/custom_tools_chatbot.mdx"

The MeshAgent **[ChatBot](./chatbot)** lets you add a conversational (chat/text based) agent to any MeshAgent Room with just a few lines of code! In this guide, you’ll build a working chat agent in four phases, starting with a minimal system prompt and ending with a custom, tool-powered assistant.

**Phase Overview**
1. **Using the MeshAgent CLI**: Bring a ready-made ChatBot into a room using a single CLI command.
2. **Creating a Basic ChatBot**: Create a simple agent with a system prompt (rules) and connect it to a MeshAgent room. This allows us to see the code behind the CLI chatbot. 
3. **Extending a ChatBot with Built-in MeshAgent Tools**: Extend our chat agent by adding MeshAgent's prebuilt tools to interact with the user and write documents to the room.
4. **Adding Custom Tools to a ChatBot**: Add additional custom tools to the agent for use-case specific tasks. 

**You'll learn how to:**  
- Build a chat based agent with MeshAgent
- Connect the agent to a MeshAgent Room for live testing
- Define and add custom tools to an agent
- Decide how you want to run and deploy your agent

## Prerequisites
Before you begin be sure you have: 
- Created your MeshAgent account and project
- Set up and activated a virtual environment, and installed MeshAgent. See the [Getting Started Guide](../../introduction/get_started) for help getting setup. 
- Authenticated to MeshAgent using the CLI by running ``meshagent setup``

## Phase 1: Chat with the built-in ChatBot from the CLI
Start by calling the built-in ChatBot into a room directly from the CLI:

```sh
meshagent chatbot join --room gettingstarted --agent-name chatagent
```

This will:  
1. Start a room called ``gettingstarted`` inside your project
2. Call the ``chatagent`` into the ``gettingstarted`` room 

Next, in a web browser, go to [studio.meshagent.com](https://studio.meshagent.com) and join the ``gettingstarted`` room from the **Sessions** tab. You will see the ``chatagent`` appear in the participants tab. Select it and start chatting!


## Phase 2: Building a Simple ChatBot
Now that we've seen the default chatbot in action, let's create one from scratch. 

Create a ``main.py`` file and paste the starter code below for the basic ``ChatBot``. To start, we can give the agent one rule / system instruction. We'll build up this code over the course of this tutorial. 

> **Note**: You can optionally set the ``port`` parameter on ``ServiceHost``. If you don't pass a port, it will default to an available port. 

<CodeGroup>
    <SimpleChatbot />
</CodeGroup>

Run the ``ChatBot`` locally and connect it to a Room. From your terminal run:

```sh
meshagent setup # authenticate to meshagent if not already signed in
meshagent service run "main.py" --room=gettingstarted
```

MeshAgent will start the ServiceHost, discover your ChatBot endpoint automatically, and call it into the specified room.
In [MeshAgent Studio](https://studio.meshagent.com/), open the ``gettingstarted`` room from the **Sessions** tab and chat with your new agent!

> **Tip**: There are two ways to connect an agent to a room:
>    - ``meshagent service run`` – Starts the ``ServiceHost``, automatically discovers all agents and tools defined in your service, and calls them into the room for you. This is the easiest way to test multi-agent or multi-tool setups.
>    - ``meshagent call agent`` – Manually calls a single agent into a room by URL. Use this when you want finer control or to test one agent endpoint at a time, for example: ``meshagent call agent --url=http://localhost:8081/chat --room=gettingstarted --participant-name=chatbot``. You will also need to run your file to start the agent locally e.g. python main.py before running the call command. 

To see live logs, traces, and metrics as you interact with the agent check out the Developer Console on the bottom pane of the Studio. You can toggle this console on and off by selecting or deselecting it from the menu in the room. 

## Phase 3: Adding Built-in MeshAgent Tools to our ChatBot
Next, let's give our agent the ability to interact with the user through the UI, convert documents to markdown, and write documents to the room. We can do this by adding toolkits to our agent. Toolkits represent a group of tools that are used for a particular purpose. 

We'll also add a few imports and update the chat agent's rules so it knows how to interact with the available tools more efficiently. 

<CodeGroup>
    <MeshToolsChatbot />
</CodeGroup>

We can test the agent using the same command as we did with the simple chat agent! (Be sure to cancel the previous command Ctrl+C before rerunning)
```sh
meshagent service run "main.py" --room=gettingstarted
```
Head back to [MeshAgentStudio](https://studio.meshagent.com) and try giving the agent a document to chat about.

## Phase 4: Adding Custom Tools to our ChatBot
Now let's add a custom tool to our ChatBot! We'll create a TaskTracker toolkit that allows the agent to write and read tasks using the Room database. 

To do this we will update the chat agent initialization to create a table for the tasks when the room starts up. We will create a tasks toolkit with two custom tools to **WriteTask** and **GetTasks** from the database. 

This is a simple example of adding tasks, to create a more useful task writer we'd want to add date information and other metadata to better track and filter tasks. This example is mainly to demonstrate writing to room storage and adding custom tools to our chat agent.

<CodeGroup>
    <CustomToolsChatbot />
</CodeGroup>

We can test the agent using the same commands as we did with the simple chat agent! And now when we go to the room we can ask the agent to add a task to our task database. 

```sh
meshagent service run "main.py" --room=gettingstarted
```

Once we're satisfied with how the agent is performing we can deploy and share it. 

> **Note**: Building an agent will likely take multiple rounds of iterating through writing different versions of the system prompt and crafting the best tools for the agent.

## Troubleshooting & Tips

- Use the Developer Console in Studio to view logs, traces, and LLM calls live.
- Small tweaks to your rules (system prompt) and toolkits can have big quality impacts.
- Restart the service whenever you modify code; the room will auto-reconnect.

## Next Steps
- [ChatBot](./chatbot) Overview — Review the lifecycle, context building, and key methods for MeshAgent ChatBots
- [TaskRunner](./taskrunner) — Learn how to run agents in the background with TaskRunners
- [Worker](./worker) — Offload background or long-running jobs
- [Services & Containers](../../services_room_containers/overview) - Deploy your ChatBot as a managed or on-demand service
- [Secrets & Registries](../../secrets/secrets_overview) — Learn how to store credentials securely for deployment