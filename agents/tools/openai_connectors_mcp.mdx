---
title: "Using OpenAI Connectors & MCP Servers"
---

import MCPChatBot from "/snippets/examples/python/agents/mcpchatbot/mcp_chatbot.mdx"

In addition to MeshAgent Tools, agents can also use external tools through [OpenAI Connectors and Model Context Protocol (MCP) servers](https://platform.openai.com/docs/guides/tools-connectors-mcp). 

- **OpenAI Connectors**: OpenAI-maintained MCP wrappers for third party services that don't have official MCP servers (Gmail, Google Drive, Outlook, Microsoft Teams, Dropbox etc.). Using these connectors requires OAuth client registration and authorization with the provider. 
- **Remote MCP servers**: Any MCP server operated by you or a third party. You provide the server URL and any required authentication details, and the agent can call the server's MCP tools. 

## Using OpenAI Connectors & MCP Tools with Agents

The simplest way to give your agent access to MCP tools is to pass them directly to the `toolkits` parameter when creating the agent (see example below). This will ensure the agent always has access to the tools.  

For more advanced use cases, you can also let users dynamically enable/disable specific connectors per message - see [Dynamic MCP Tools](./dynamic_openai_connectors_mcp) for details.

In both cases, MeshAgent talks to OpenAI via the [`OpenAIResponsesAdapter`](../adapters/openai_responses_adapter). This adapter gathers the toolkits available to the agent on that turn, manages tool execution, streaming responses, and returning the final result. 

## Example: Create an Agent with MCP Tools

Let's create a [`ChatBot`](../agents/chatbot) that can use the public [DeepWiki MCP Server](https://docs.devin.ai/work-with-devin/deepwiki-mcp) which does not require an access token or OAuth. 

For this ChatBot we'll define: 
- A `Toolkit`: a collection of related tools the agent can use
- An `MCPTool`: connects to an MCP server
- `MCPConfig`: configuration for the MCP connection
- `MCPServer`: the actual server details (URL, authentication details)

<CodeGroup>
  <MCPChatBot />
</CodeGroup>

Run it locally and try it in MeshAgent Studio:

```bash bash 
meshagent service run "main.py" --room=myroom
```

From [MeshAgent Studio](https://studio.meshagent.com), enter `myroom`, and start talking to the agent. Ask it about public GitHub repositories and it will use the DeepWiki MCP tools to respond. For example you can ask "What's in the README on the Pydantic AI repository?". 

### Package and deploy the agent
Once satisfied with the agent, we can [package](../../services_room_containers/packaging_and_deploying/packaging) and [deploy](../../services_room_containers/packaging_and_deploying/deployment) it as a project service so it's automatically available to all the rooms in a project, or as a room service so it's always available in a specific room. To do so we'll create a Dockerfile, build/push the image, create a yaml file that defines the service, then deploy it using the MeshAgent CLI. 

**Step 1: Create the Dockerfile**

```Dockerfile Dockerfile
FROM meshagent/python-sdk-slim:latest
COPY . /src
WORKDIR /src
ENTRYPOINT [ "python3", "main.py" ]
```

**Step 2: Build and Push the Image**

```bash 
docker buildx build . \
  -t "$IMAGE:$TAG" \
  --platform linux/amd64 \
  --push
```

**Step 3: Define the Service**

```yaml yaml
kind: Service
version: v1
metadata:
  name: mcp-deepwiki-chatbot
  description: "Expose a ChatBot with access to DeepWiki MCP server"
ports:
- num: "*" 
  type: http
  liveness: "/"
  endpoints:
  - path: /mcp-deepwiki-chatbot
    meshagent:
      identity: "mcp-deepwiki-chatbot"
container:
  image: "IMAGE:TAG"
```

**Step 4: Deploy**

```bash bash
meshagent service create --file "meshagent.yaml" # optional --room=myroom 
```

**Step 5: Use Your Deployed Agent**

Next open [MeshAgent Studio](https://studio.meshagent.com), go to a room where the service is deployed, and begin talking to the ChatBot.

## Conclusion

OpenAI Connectors and MCP Servers extend your agents with third-party capabilities. When adding these tools, consider:
- What data you're sharing with external services
- Who operates the MCP servers you connect to  
- Whether agents should require approval before using certain tools

**Use always-available toolkits** (like this example) when agents need consistent access to specific capabilities, such as a support agent with internal ticketing tools.

**Use dynamic toolkits** when you want users to control which tools are available per message, this is particularly helpful if you are trying to build a ChatGPT/Claude style experience where users can toggle tools on and off. See [Dynamic Toolkits](./dynamic_openai_connectors_mcp) for details.

## Related Topics
- [Dynamic Connectors and MCP Servers](dynamic_openai_connectors_mcp): Configure your agent and UI so users can dynamically select tools for the agent per message. 
- [Introduction to Services and Containers](../../services_room_containers/overview): Learn more about project and room services and how to run ad-hoc commands using the Containers API. 
- [Packaging Services](../../services_room_containers/packaging_and_deploying/packaging): Learn how to create a meshagent.yaml file to package a project or room service
- [Deploying Services](../../services_room_containers/packaging_and_deploying/deployment): Learn how to deploy a project or room service from MeshAgent Studio or using the MeshAgent CLI
- [Secrets](../../secrets/secrets_overview): Understand how to use secrets and OAuth with MeshAgent