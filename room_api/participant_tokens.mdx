---
title: Participant Tokens
---

Every participant in a MeshAgent room operates with a secure token that defines their identity and permissions. These JWT-based tokens ensure that users, containers, and services can only access the resources they're authorized to use.

## Token Anatomy
MeshAgent exposes tokens through `meshagent.api.participant_token.ParticipantToken` which consists of:

- `name`: the participant identifier embedded in the JWT payload
- `project_id` (optional): the project id, populated when the participant belongs to a project
- `api_key_id` (optional): the API key id used to mint the token
- `version` (optional): the participant-token schema version (defaulted when omitted)
- `grants` (optional): a list of individual `ParticipantGrant` entries that describe permissions

### Permission Types 
Participant tokens use grants and scopes to define permissions. Each grant has a grant name which indicates the type of permission (``room``, ``role``, ``tunnel_ports``, ``api``), and each grant has a scope which provides the specific details of what is allowed. 

| Grant | Scope format | What it controls |
| ----- | ------------ | ---------------- |
| `room` | room name string | Which room the participant may join (`add_room_grant`) |
| `role` | `"agent" \| "tool" \| "user"` | Participant role advertised to other services (`add_role_grant`) |
| `tunnel_ports` | comma-separated port numbers | Which tunnel ports can be opened from the room server (`add_tunnel_grant`) |
| `api` | [`ApiScope`](./api_scopes) object | Fine-grained access to each Room API surface (`add_api_grant`). A single `ApiScope` can enable multiple sections (storage, containers, secrets, etc.) |

## How tokens are issued
MeshAgent components mint tokens on your behalf:

- **Room containers and project services**: `meshagent.server.containers_extension` generates a token, adds room/role grants, and drops it into your container via `MESHAGENT_TOKEN` (and `OPENAI_API_KEY`) at start-up.
- **Cloud projects**: `meshagent.cloud.room_provisioner` performs the same token hand-off when provisioning SaaS-hosted rooms.
- **End-user connections**: `meshagent.router.cloud_router_server.connect_room` looks up any saved `ProjectRoomGrant`, copies its `permissions` `ApiScope`, and uses it to create the JWT that end users download.
- **Webhooks and remote calls**: `meshagent.server.room_server.call` mints an on-the-fly token and includes it in webhook payloads so downstream services can call back into the room securely.

In all cases the token is signed with your project secret and surfaced to the participant as a standard JWT.

## Related topics
- [`ApiScope` reference](./api_scopes)
- [Managing project room grants](../accounts/accounts_client)