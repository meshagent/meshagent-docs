---
title: Deploying Services
---
import SimpleChatbot from "/snippets/examples/python/deployable/simple_chatbot/simple_chatbot.mdx"
import SimpleChatbotYAML from "/snippets/examples/python/deployable/simple_chatbot/meshagent.mdx"

After you've [packaged your service](./packaging), you're ready to deploy it. MeshAgent services can be deployed as a **project service** (available in every room in the project) or as a **room service** (scoped to a specific room). 

Both service types start and stop with the roomâ€™s lifecycle. The main difference is how updates behave: **room services update automatically during an active session**  when you change them, while **project services require a room restart** for the change to take effect.

Project services are best for static, shared functionality. Room services are best when customization is needed or only certain teams need access to them. To learn more about when to use each, see [Introduction to Services and Containers](./overview).

## Deployment Options
- **MeshAgent CLI**: Automate deployments and integrate with CI/CD workflows. The CLI accepts both `kind: Service` and `kind: ServiceTemplate` manifests. Use `meshagent service validate-template` to validate templates and `meshagent service create-template` / `update-template` to deploy them with values. 
- **MeshAgent Studio**: Deploy and manage services through the web UI at [studio.meshagent.com](https://studio.meshagent.com)
- **Powerboards Install Links**: Install services directly into Powerboards (room services only).

## Before you deploy
For common agents (like chatbots and voicebots) you can use the CLI to deploy the agent in one step (e.g. `meshagent chatbot deploy...`)

For custom services, you can deploy from the MeshAgent Studio UI, or you'll need to create a service configuration file (`meshagent.yaml`) that specifies either: 
- **Containerized services**: Container image, commands, and applicable environment variables or secrets. 
- **External services**: URL where your service is already running. 

If you're using a `ServiceTemplate`, provide values at deploy time using `--values-file` or `--value`. You can also validate the template first with `meshagent service validate-template`.
For `kind: Service` manifests, validate locally with `meshagent service validate` before deploying.

## Example: Deploy a Custom ChatBot

### Step 1: Create the agent files
Let's create a simple chatbot that can be deployed as a project or room service. To deploy the agent we'll create three files: 
- **main.py:** A MeshAgent-native chatbot service using ServiceHost
- **Dockerfile:** Packages the service as a container
- **meshagent.yaml**: A service config that defines how to run the service

**main.py**

<CodeGroup>
    <SimpleChatbot />
</CodeGroup>


**Dockerfile**

```dockerfile Dockerfile
FROM meshagent/python-sdk-slim:latest

COPY . /src

WORKDIR /src

ENTRYPOINT [ "python3", "main.py" ]
```

### Step 2: Build and push the container
Build and push the Docker image to your registry. Make sure `$IMAGE` and `$TAG` are set for your repo. You can skip this step and still run the example since the container in the `meshagent.yaml` file below defaults to an existing meshagent container. 

```bash
docker buildx build . \
  -t "$IMAGE:$TAG" \ 
  --platform linux/amd64 \
  --push
```

> **Note:** We recommend docker buildx because it supports cross-platform builds, pushes directly to your registry in one step, and enables optional layer caching for much faster CI builds.

### Step 3: Configure the `meshagent.yaml` file

Update the container section of the YAML file to use your image (if applicable).

<CodeGroup>
    <SimpleChatbotYAML />
</CodeGroup>

For more details on the configuration files see the [packaging services](./packaging) documentation. Don't forget to add a `pull_secret` parameter to the `container` section of the manifest if you are pulling from a private repository. 

### Step 4: Deploy the Service
#### Deploy via CLI
We can deploy the service to the entire project or to a specific room. To deploy to the entire project, omit `--room`. To deploy to a specific room, include `--room <room>`.

```bash bash
meshagent setup # authenticate to MeshAgent if not already done

# Deploy as a project service
meshagent service create --file="meshagent.yaml"

# Deploy as a room service
meshagent service create --file="meshagent.yaml" --room quickstart
```

If you are starting from a `ServiceTemplate`, validate it and provide values when deploying:

```bash bash
# Validate a template file
meshagent service validate-template --file="meshagent.template.yaml"

# Deploy from a template (project service)
meshagent service create-template --file="meshagent.template.yaml" --values-file="meshagent.values.yaml"

# Deploy from a template (room service)
meshagent service create-template --file="meshagent.template.yaml" --values-file="meshagent.values.yaml" --room quickstart
```

#### Deploy from MeshAgent Studio
You can also deploy and manage services from [MeshAgent Studio](https://studio.meshagent.com). 

**Project Service**

1. Visit [studio.meshagent.com](https://studio.meshagent.com) and select your project
2. Select the **Services** tab and choose **New Service**
3. Provide the required information
4. Save the configuration

Once saved, the service will be available to all the rooms in your project. The next time any room session starts, the project service will start in that room.

**Room Services**

1. Visit [studio.meshagent.com](https://studio.meshagent.com) and open a specific room
2. Select the menu icon on a room then **Services** then click **New Service**
3. Provide the required information 
4. Save the configuration

Once saved, the service will be available in this room and start the next time the room starts. If the service is updated during the session, MeshAgent will automatically update the service so it stays in sync with what is saved.

### Step 5: Use the Service
Now that your service is deployed, try it out in [MeshAgent Studio](https://studio.meshagent.com). 

**Project Services**
If you deployed the agent as a project service, it will appear under the **Services** tab of the UI. To use the service, simply start a new session in any room and enter the room, the chatbot will appear in the participants tab for you to interact with. 

**Room Services**
If you deployed the agent to a specific room, it will appear in the room services menu. When you start the room, the service will come up and you can begin using it. 

## Update an Existing Service
If you make modifications to your service, you can easily update it using the MeshAgent CLI. 

```bash bash
meshagent service update --file meshagent.yaml  # add --room=myroom for room services
meshagent service update-template --file meshagent.template.yaml --values-file meshagent.values.yaml  # add --room=myroom for room services
```

## Verify Deployment and Troubleshooting
You can verify if the service is running from the **Developer Console** which appears at the bottom half of the room UI in MeshAgent Studio. 

From the **Containers** tab, you'll see the name of the container, who started it, and its status. You can also view container logs and stop the container. If the service is not starting be sure to check the container logs, it's possible that the container is crashing because it is missing a library etc. 

From the **Logs** tab, you'll see startup messages from your service, use this to check that the service has started appropriately. 

## Related Topics
- [Share agents in Powerboards](./share_agents_in_powerboards)
