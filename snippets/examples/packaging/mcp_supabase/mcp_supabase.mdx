```yaml Yaml
kind: ServiceTemplate
version: v1
metadata:
  name: mcp-supabase
  description: "Expose Supabase MCP tools via meshagent mcp http"
  annotations:
    meshagent.service.id: "mcp-supabase" # required for powerboards
variables:
  - name: supabase_project_ref
    description: "Supabase project ref (from project settings)"
  - name: supabase_access_token
    description: "Supabase access token"
    obscure: true
    annotations:
      meshagent.secret.id: supabase
      meshagent.secret.identity: supabase
      meshagent.secret.name: supabase
      meshagent.secret.type: text
container:
  image: "us-central1-docker.pkg.dev/meshagent-public/images/cli:{SERVER_VERSION}-esgz"
  command: >
    /usr/bin/meshagent mcp http
    --toolkit-name supabase
    --url 'https://mcp.supabase.com/mcp?project_ref={{ supabase_project_ref }}'
    --header-secret "Authorization:Bearer {supabase}"
  environment:
    - name: SUPABASE_PROJECT_REF
      value: "{{ supabase_project_ref }}"
    - name: MESHAGENT_TOKEN
      token:
        identity: supabase
        api:
          agents:
            register_public_toolkit: true
            register_private_toolkit: true
            register_agent: true
            call: true
            use_agents: true
            use_tools: true
          secrets: {}

```

