version: v1
kind: ServiceTemplate
metadata:
  name: mailbot
  annotations:
    meshagent.service.id: mailbot
agents:
- name: mailbot
  annotations:
    meshagent.agent.type: MailBot
variables:
  - name: email_address
    type: email
    description: "Email address for the mailbot (e.g. myagent@mail.meshagent.com)"
container:
  image: us-central1-docker.pkg.dev/meshagent-public/images/cli:{SERVER_VERSION}-esgz
  command: >-
    meshagent mailbot join
    --agent-name mailbot
    --enable-attachments
    --require-web-search
    --email-address {{email_address}}
  environment:
    - name: MESHAGENT_TOKEN
      token:
        identity: mailbot