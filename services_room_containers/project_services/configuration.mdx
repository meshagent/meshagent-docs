---
title: Configure Project Services
---
Project-wide services let you run services automatically across every room in a project. They automatically start when a room starts and stop when it ends. Each service is defined in a Service manifest (meshagent.yaml) that describes how MeshAgent should run your container.

To deploy a service youâ€™ll need:
- A ``meshagent.yaml`` manifest (``kind: Service``)
- A Dockerfile
- Your application code (``e.g., main.py``)

Services can be configured via the [MeshAgent Studio's](https://studio.meshagent.com) Services tab or using a ServiceSpec YAML file.

## Service Manifest Reference
A Service manifest (``kind:Service``) defines how your service should be deployed and contains the following components: 

| Field        | Required? | Description                                          |
| ------------ | --------- | ---------------------------------------------------- |
| version      | Yes       | Spec version (`v1`)                                  |
| kind         | Yes       | Template kind, always `Service`                      |
| name         | Yes       | A name for your service                              |
| id           | No        | An ID for your service (auto-generated if omitted)   |
| image        | Yes       | Container image to run                               |
| command      | No        | Override the container entrypoint                    |
| ports        | No        | Ports/endpoints MeshAgent should call   (MeshAgent will automatically assign services to available ports)             |
| role         | No        | Service role - ``agent``, ``tool``, or ``user`` (this will likely be set at the port endpoints level)            |
| environment  | No        | Environment variables for your service               |
| secrets      | No        | Secret key ids injected as environment variables     |
| pull\_secret | No        | Image pull secret ID for private container registries |
| storage      | No        | Room/project storage mounts                          |


### Metadata Fields

```yaml yaml
version: v1           # Required
kind: Service         # Required: Always "Service"
name: my-service      # Required: Unique service name
id: optional-id       # Optional: Custom ID (auto-generated if not provided)
```

### Container Configuration 

```yaml yaml
image: your-registry/service:v1    # Required: Container image
command: "python main.py"         # Optional: Override container command
pull_secret: registry-credentials  # Optional: For private registries
```

### Environment
Map template variables to environment variables in your container. For example: 

```yaml yaml
environment:
- name: SYSTEM_PROMPT
  value: "{system_prompt}"
- name: MODEL_NAME
  value: "{model_name}"
- name: OPENAI_API_KEY
  value: "{api_key}"
```

### Ports and Endpoints
Define how MeshAgent connects to your service:

```yaml yaml
ports:
- num: "*"  # Let MeshAgent assign an available port
  liveness: "/"  # Health check endpoint to make sure tools and agents are ready 
  endpoints:
  - path: /agent
    identity: chatbot
    role: agent
    type: meshagent.callable
  - path: /tool
    identity: helper-tool
    role: tool
    type: meshagent.callable
```

**Port Options**:
- ``num``: Port number or "*" for auto-assignment
- ``type``: Optional protocol type (``meshagent.callable``, ``mcp.sse``, ``http``, ``tcp``)
- ``liveness``: Health check path
- ``endpoints``: List of endpoints this port serves

**Endpoint Options**:
- ``path``: URL path for this endpoint
- ``identity``: Unique name for this agent/tool
- ``type``: Protocol type (``meshagent.callable``, ``mcp.sse``, ``http``, ``tcp``)
- ``role``: Override the service role for this endpoint (optional)

### Storage
Optionally mount storage into your service container for file access. This can be done at the room or project level. Room-storage is for room-specific files and read/write by default. Project-wide shared files are read-only by default. 

For example: 

```yaml yaml
storage:
  room:
  - path: /data
    read_only: false
  - path: /app/uploads
    subpath: "user-uploads"
    read_only: true
  project:
  - path: /app/shared
    read_only: true
```

## Example

Let's create a simple chatbot that can be deployed to all the rooms in our project. To deploy this we'll need the main.py file, a Dockerfile, and a meshagent.yaml file.

**main.py**

```python Python
import os
import asyncio
import logging
from meshagent.agents.chat import ChatBot
from meshagent.api.services import ServiceHost
from meshagent.openai import OpenAIResponsesAdapter

logging.basicConfig(level=logging.DEBUG)

host = ServiceHost()

@host.path("/agent")
class MyChatBot(ChatBot): 
    def __init__(self):
        super().__init__(
            name="chatbot",
            llm_adapter=OpenAIResponsesAdapter(),
        )

asyncio.run(host.run())
```

**Dockerfile**

```Dockerfile Dockerfile
FROM meshagent/python-sdk-slim:latest

COPY . /src

WORKDIR /src

ENTRYPOINT [ "python3", "main.py" ]
```

**meshagent.yaml**
```yaml yaml
kind: Service
version: v1
name: chatbot

ports:
- num: "*"
  liveness: "/"
  endpoints:
  - path: /agent
    identity: chatbot
    type: meshagent.callable
```

Now that we have our agent, Dockerfile, and meshagent.yaml file set up we're ready to go!

## Next Steps
- [Deploy your service](./deployment): Learn how to deploy project-wide services.
- [Configure Room Service Containers](../room_containers/configuration): Configure room-specific services using containers. 